-- diserahkan untuk yang mengerjakan BAHAN_BAKU

CREATE OR REPLACE FUNCTION hitung_stok_bahan_baku()
RETURN trigger AS 
$$
	DECLARE
		row RECORD;
		jumlah INTEGER;
	BEGIN
		FOR row IN:
			SELECT 
//????
		SELECT SUM(P.JumlahPembelian) INTO jumlah
		FROM PEMBELIAN_BAHAN_BAKU P
		WHERE
//????

	END
$$
LANGUAGE plpgsql



-- TRIGGER

CREATE TRIGGER jumlah_stok
AFTER INSERT OR DELETE OR UPDATE
ON PEMBELIAN_BAHAN_BAKU FOR EACH ROW
EXECUTE PROCEDURE hitung_stok_bahan_baku();